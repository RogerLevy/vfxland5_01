{
  "name": "VFX Forth Simple",
  "scopeName": "source.vfx-forth-simple",
  "wordPattern": "[^\\s]+",  
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#flow-control-words"
    },
    {
      "include": "#colon-definitions"
    },
    {
      "include": "#local-variables"
    },
    {
      "include": "#defining-phrases"
    },
    {
      "include": "#colon-words"
    },
    {
      "include": "#standalone-semicolon"
    },
    {
      "include": "#core-words"
    },
    {
      "include": "#numbers"
    },
    {
      "include": "#character-literals"
    },
    {
      "include": "#defining-words"
    },
    {
      "include": "#user-words"
    },
    {
        "match": "[^\\s]+",
        "name": "entity.name.forth.word"
    }    
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.backslash.vfx-forth",
          "match": "\\\\\\s.*$"
        },
        {
          "name": "comment.block.parens.vfx-forth",
          "begin": "\\(\\s",
          "end": "\\)",
          "name": "comment.block.parens.vfx-forth"
        },
        {
          "name": "comment.block.multiline.vfx-forth",
          "begin": "\\(\\(",
          "end": "\\)\\)",
          "name": "comment.block.multiline.vfx-forth"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.vfx-forth",
          "begin": "(?<=\\s|^)(s\"|se\"|c\"|c\\\\\"|z\"|eval\"|abort\"|\\.\"|f\"|fe\"|s\\\\\")(?=\\s)",
          "end": "\"",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.string.vfx-forth"
            }
          },
          "contentName": "string.quoted.double.vfx-forth"
        }
      ]
    },
    "colon-definitions": {
      "patterns": [
        {
          "begin": "(?<=\\s|^)(:)(?=\\s)",
          "end": "(;)(?=\\s|$)",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "endCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#strings"
            },
            {
              "include": "#flow-control-words"
            },
            {
              "include": "#local-variables"
            },
            {
              "include": "#numbers"
            },
            {
              "include": "#character-literals"
            },
            {
              "match": "(?<=:)\\s+([^\\s]+)(?=\\s|$)",
              "captures": {
                "1": {
                  "name": "keyword.other.defining.vfx-forth"
                }
              }
            },
            {
              "include": "#defining-words-in-definition"
            },
            {
              "include": "#core-words-in-definition"
            },
            {
              "include": "#user-words"
            }
          ]
        }
      ]
    },
    "local-variables": {
      "patterns": [
        {
          "name": "keyword.other.defining.vfx-forth",
          "begin": "(?<=\\s|^)\\{:",
          "end": ":\\}",
          "beginCaptures": {
            "0": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "endCaptures": {
            "0": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "contentName": "keyword.other.defining.vfx-forth"
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.hex.vfx-forth",
          "match": "(?<=\\s|^)\\$[0-9a-fA-F]+(?=\\s|$)"
        },
        {
          "name": "constant.numeric.hex.vfx-forth",
          "match": "(?<=\\s|^)0x[0-9a-fA-F]+(?=\\s|$)"
        },
        {
          "name": "constant.numeric.hex.vfx-forth",
          "match": "(?<=\\s|^)#[0-9]+(?=\\s|$)"
        },
        {
          "name": "constant.numeric.hex.vfx-forth",
          "match": "(?<=\\s|^)%[01]+(?=\\s|$)"
        },
        {
          "name": "constant.numeric.float.vfx-forth",
          "match": "(?<=\\s|^)-?[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?(?=\\s|$)"
        },
        {
          "name": "constant.numeric.float.vfx-forth",
          "match": "(?<=\\s|^)-?[0-9]+\\.[0-9]*([eE][+-]?[0-9]+)?(?=\\s|$)"
        },
        {
          "name": "constant.numeric.float.vfx-forth",
          "match": "(?<=\\s|^)-?[0-9]+[eE][+-]?[0-9]+(?=\\s|$)"
        },
        {
          "name": "constant.numeric.float.vfx-forth",
          "match": "(?<=\\s|^)-?[0-9]+e(?=\\s|$)"
        },
        {
          "name": "constant.numeric.float.vfx-forth",
          "match": "(?<=\\s|^)-?\\.[0-9]+e(?=\\s|$)"
        },
        {
          "name": "constant.numeric.float.vfx-forth",
          "match": "(?<=\\s|^)-?[0-9]+\\.e(?=\\s|$)"
        },
        {
          "name": "constant.numeric.integer.vfx-forth",
          "match": "(?<=\\s|^)-?[0-9]+(?![0-9.eE])(?=\\s|$)"
        }
      ]
    },
    "character-literals": {
      "patterns": [
        {
          "name": "constant.character.vfx-forth",
          "match": "(?<=\\s|^)'[^\\s]'?(?=\\s|$)"
        }
      ]
    },
    "defining-phrases": {
      "patterns": [
        {
          "name": "keyword.other.defining.vfx-forth",
          "match": "(?<=\\s|^)(\\d+\\s+)?(\\S+)\\s+(:construct|:derive|:reopen)(?=\\s)",
          "captures": {
            "1": {
              "name": "constant.numeric.integer.vfx-forth"
            },
            "2": {
              "name": "keyword.other.defining.vfx-forth"
            },
            "3": {
              "name": "keyword.other.defining.vfx-forth"
            }
          }
        },
        {
          "name": "keyword.other.defining.vfx-forth",
          "begin": "(?<=\\s|^)([^\\s]+)\\s+(::)\\s+",
          "end": "([^\\s]+)(?=\\s|$)",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            },
            "2": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "endCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          }
        },
        {
          "name": "keyword.other.defining.vfx-forth",
          "match": "(?<=\\s|^):noname(?=\\s|$)"
        },
        {
          "name": "keyword.other.defining.vfx-forth",
          "begin": "(?<=\\s|^)(:)(?=\\s)",
          "end": "(?<=\\s)([^\\s]+)(?=\\s|$)",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "endCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "contentName": "keyword.other.defining.vfx-forth"
        },
        {
          "name": "keyword.other.defining.vfx-forth",
          "begin": "(?<=\\s|^)(variable|2variable|create|does>|synonym|value|fvalue|2value|constant|fconstant|2constant|var|svar|static|rolevar|struct|:make|objlist|m:|el:|assetdef|defer|vocabulary|define|field|sfield|rolefield|\\+user|user|begin-structure|fconstant|farray|fvariable|2constant|field:|cfield:|\\+field|buffer:|alias:|synonym|aka|class:|;code|code|end-structure|end-union|part|union|end-variant|variant|end-subrecord|subrecord|array-of|int|field|end-struct|struct|prop|nprop)(?=\\s)",
          "end": "(?<=\\s)([^\\s]+)(?=\\s|$)",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "endCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "contentName": "keyword.other.defining.vfx-forth"
        },
        {
          "name": "keyword.other.defining.vfx-forth",
          "begin": "(?<=\\s|^)([^\\s]+:)(?=\\s)(?!\\s*::)(?!\\s*construct)(?!\\s*derive)",
          "end": "(?<=\\s)([^\\s]+)(?=\\s|$)",
          "beginCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "endCaptures": {
            "1": {
              "name": "keyword.other.defining.vfx-forth"
            }
          },
          "contentName": "keyword.other.defining.vfx-forth"
        }
      ]
    },
    "standalone-semicolon": {
      "patterns": [
        {
          "name": "keyword.other.defining.vfx-forth",
          "match": "(?<=\\s|^);(?=\\s|$)"
        }
      ]
    },
    "defining-words": {
      "patterns": [
        {
          "name": "keyword.other.defining.vfx-forth",
          "match": "(?<=\\s|^)[^\\s]*;(?=\\s|$)"
        }
      ]
    },
    "defining-words-in-definition": {
      "patterns": [
        {
          "name": "keyword.other.defining.vfx-forth",
          "match": "(?<=\\s|^)(variable|2variable|create|does>|synonym|value|fvalue|2value|constant|fconstant|2constant|var|svar|static|rolevar|struct|:make|objlist|m:|el:|assetdef|defer|vocabulary|define|field|sfield|rolefield|\\+user|user|begin-structure|fconstant|farray|fvariable|2constant|field:|cfield:|\\+field|buffer:|alias:|synonym|aka|class:|;code|code|end-structure|end-union|part|union|end-variant|variant|end-subrecord|subrecord|array-of|int|field|end-struct|struct|prop|nprop|property|nproperty)(?=\\s|$)"
        }
      ]
    },
    "core-words": {
      "patterns": [
        {
          "name": "support.function.vfx-forth",
          "match": "(?<=\\s|^)(dup|drop|swap|rot|over|nip|tuck|pick|roll|2dup|2drop|2swap|2over|2rot|3dup|3drop|>r|r>|r@|2>r|2r>|2r@|@|!|c@|c!|w@|w!|2@|2!|\\+!|c\\+!|w\\+!|\\+|-|\\*|/|mod|/mod|\\*/|\\*/mod|1\\+|1-|2\\+|2-|2\\*|2/|4\\+|4-|4\\*|4/|abs|negate|min|max|umin|umax|=|<>|<|>|<=|>=|0=|0<>|0<|0>|u<|u>|u<=|u>=|within|and|or|xor|not|invert|lshift|rshift|emit|key|type|cr|space|spaces|\\.|u\\.|\\.r|u\\.r|\\?|dump|words|see|here|allot|,|c,|w,|align|aligned|count|move|fill|blank|erase|compare|search|char|\\[char\\]|postpone|to|ascii|cells|cell\\/|pad|cell\\+|allot\\&erase|i|\\[|\\])(?=\\s|$)"
        }
      ]
    },
    "core-words-in-definition": {
      "patterns": [
        {
          "name": "support.function.vfx-forth",
          "match": "(?<=\\s|^)(dup|drop|swap|rot|over|nip|tuck|pick|roll|2dup|2drop|2swap|2over|2rot|3dup|3drop|>r|r>|r@|2>r|2r>|2r@|@|!|c@|c!|w@|w!|2@|2!|\\+!|c\\+!|w\\+!|\\+|-|\\*|/|mod|/mod|\\*/|\\*/mod|1\\+|1-|2\\+|2-|2\\*|2/|4\\+|4-|4\\*|4/|abs|negate|min|max|umin|umax|=|<>|<|>|<=|>=|0=|0<>|0<|0>|u<|u>|u<=|u>=|within|and|or|xor|not|invert|lshift|rshift|emit|key|type|cr|space|spaces|\\.|u\\.|\\.r|u\\.r|\\?|dump|words|see|here|allot|,|c,|w,|align|aligned|count|move|fill|blank|erase|compare|search|char|\\[char\\]|postpone|to|asciicells|cell\\/|pad|cell\\+|allot\\&erase|i|\\[|\\])(?=\\s|$)"
        }
      ]
    },
    "colon-words": {
      "patterns": [
        {
          "name": "keyword.other.colon-word.vfx-forth",
          "match": "(?<=\\s|^):[^\\s]+(?=\\s|$)"
        }
      ]
    },
    "flow-control-words": {
      "patterns": [
        {
          "name": "keyword.control.vfx-forth",
          "match": "(?<=\\s|^)(if|then|else|endif|begin|again|until|while|repeat|do|for|loop|\\+loop|\\?do|leave|unloop|exit|case|of|endof|endcase|try|catch|throw|abort|abort\"|recurse|\\[if\\]|\\[then\\]|\\[else\\]|\\[endif\\]|\\[defined\\]|\\[undefined\\]|perform|execute|\\?exit|\\-exit)(?=\\s|$)"
        }
      ]
    },
    "user-words": {
      "name": "variable.other.vfx-forth",
      "match": "(?<=\\s|^)[^\\s]+(?=\\s|$)"
    }
  }
}