fast[

crucial test: check-object ( a - a n:res )
    dup  valid-object? ;
        
before [[ check-object
wrap-word [[

before as check-object
wrap-word as

: ?prop ( n - n )
    validations @ -exit
    dup ?exit -1 abort" ?PROP >> Property not mapped for this class!" ;

: prop+ ( object offset - a )
    \ Optimizes down to two instructions with validations off 
    fast[ s" over cla-offset + @ + @" evaluate fast]
    validations @ if s" ?prop" evaluate then
    s" +" evaluate ; immediate

aka (->) ->

: validate-object
    dup valid-object? not 
        abort" VALIDATE-OBJECT >> Invalid object." ;

: -> 
    validations @ if
        s" validate-object" evaluate
    then
    postpone (->) ; immediate

:noname  ( obj protocol - obj protocol )
    safety @ -exit
    over valid-object? not
        abort" PROTOCOL-VALIDATIONS >> Invalid object." ;
is protocol-validations

fast]