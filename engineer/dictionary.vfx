\ =============================================================================
\ Dictionaries (key/value structures)
\ =============================================================================

|| 0 value xt
|| : (walk) -1 swap dup name> >body xt execute ; 

: lookup ( $ wl - a )
    {: $ wl | buf[ 256 ] :}
    $ count buf[ place
    push-order
    only  wl +order definitions buf[ find if
        >body 
    else
        $create here 0 , 
    then
    pop-order ;

: dictionary ( - <name> ) ( - wl )
    create wordlist drop ;

: walk-dictionary ( xt dict - ) ( -1 key$ a:val - f )
    \ second stack effect belongs to the XT.
    xt >r  swap to xt
    ['] (walk) swap traverse-wordlist
    r> to xt ;

: walk> ( dict - ) ( -1 $ a - f )
    r> swap walk-dictionary ;

: dict. ( dict - )
    walk> cr swap count type ."  = " ? ;
