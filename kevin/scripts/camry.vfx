require scripts\trafficlight.vfx

class: camry
    actor derive
: bottom  y @ y1 @ >. + h1 @ >. + ;
: stand   bottom y @ - gap 2 / >. - negate y +! ;
: hitbox!  2dup -2 -2 2/ x1 2! w1 2! ;
camry :: init
    0 prio !
    camry.png bmp !
    bmp @ bmpwh hitbox!
    stand 
    begin
        bmp @ bmpw negate >. x !
        0 vx !
        act> redlight
        act> 1.0 passed? -exit
            greenlight 8. vx !
        act> 
            p1 me hit? if me p1 collide then
            x @ x1 @ >. + 320. >= -exit
    again ;

class;