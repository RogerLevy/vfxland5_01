\ =============================================================================
\ Create classes from bitmaps automatically
\ =============================================================================

: create-autoclass ( a n - )
    -path | n a |
    a n s" png" ext? -exit
    a n -ext >pad find nip ?exit
    \ ." Creating auto-class from bitmap " a n type cr
    push-order only forth definitions
    a n -ext f" class: %s actor derive autoclass on" 2dup type cr evaluate
    a n f"     template [[ %s bmp ! ]]" 2dup type cr evaluate 
    s" class;" 2dup type cr evaluate 
    pop-order ;

: create-autoclasses
    ." Creating autoclasses..." cr
    s" gfx" >datadir dir-exists? -exit
    get-order get-current
        s" gfx" >datadir
        ['] create-autoclass each-file
    set-current set-order ;
