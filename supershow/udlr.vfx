private
create walkv's  1. , 0 ,   0 , -1. ,   -1. , 0 ,   0 , 1. , 

public
0 constant right
1 constant up
2 constant left
3 constant down

$08 constant BIT_FLR
$04 constant BIT_CEL
$02 constant BIT_WLT
$01 constant BIT_WRT

0 value lwall?
0 value rwall?
0 value floor?
0 value ceiling?

: clear-collision-state 0 to lwall?  0 to rwall?  0 to floor?  0 to ceiling? ;

class: %actor
    prop fac :int <save
class;

: dirkeys? ( - f )
    <left> held? <right> held? or <up> held? or <down> held? or ;

: dirkeysup? ( - f )
    <left> letgo? <right> letgo? or <up> letgo? or <down> letgo? or ;

: pudlr4 ( - )
    <left> pressed? if  left fac !  exit then
    <right> pressed? if  right fac !  exit then
    <up> pressed? if  up fac !  exit then
    <down> pressed? if  down fac !  exit then ;

: sudlr4 ( - )
    <left> held? if  left fac !  exit then
    <right> held? if  right fac !  exit then
    <up> held? if  up fac !  exit then
    <down> held? if  down fac !  exit then ;

: dir>v  2 cells * walkv's + 2@ ;