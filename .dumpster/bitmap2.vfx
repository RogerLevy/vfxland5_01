\ WIP 
\ based on sketch provided by Claude

class: png-bitmap
    is-a asset
    var allegro-bitmap
    var id

    :: gen-path ( name len - a len )
        f" dat/gfx/%s.png" ;

    :: load-content ( - )
        ;  \ No-op - PNG is already the content

    :: setup ( - )
        srcpath count al_load_bitmap allegro-bitmap ! ;

    :: cleanup ( - )
        allegro-bitmap @ ?dup if al_destroy_bitmap then ;

    :: save-content ( - )
        allegro-bitmap @ srcpath count al_save_bitmap ;
class;

: >bitmap ( - <name> ) ( - bmpid )
    png-bitmap ?asset dup manifest
    new? -exit does> -> id @ ;

: >bmp ( n - allegro-bitmap )
    bitmaps [] @ -> allegro-bitmap @ ;
