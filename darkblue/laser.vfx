actor-class laser
    is-a projectile
    prop dest-w 
    prop dest-atk 

: draw-laser ( - )
    w @ p>f f>ds >r
    x 2@ 2p>f
    a @ l @ vec x 2@ 2+ 2p>f
    1e 1e 1e 1e 
    r> al_draw_line ;

: step-laser ( - )
    hold @ ?exit behave physics +time ;

public

laser object beam

20 beam 's atk ! 

: *beam ( laser-angle. laser-length. laser-width. - beam )
    laser beam construct
    beam as>
        w ! l ! a !
        at@ 2s>p x 2!
        halt
        en on me ;

: beams ( - )
    beam as>
        en @ -exit
        step-laser
        draw-laser ;
