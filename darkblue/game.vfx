require title.vfx
require-event test1
require laser.vfx
\ require death.vfx
\ require subscreen.vfx
\ require savegame.vfx
\ require %idir%\..\supershow\ui\ui.vfx

\ Global commands
: *ship ( - )
    ship% one [[ me turret% one 's n1 ! ]] ;

: *player ( - )
    *ship ;

: (reset) ( - )
    0 next# ! actives> you me = ?exit unload ;

: reset ( - )
    (reset)
    50 gameh 2 / at *player
    500 energy ! ;

: retry ( - )
    blank blank blank
    1.0 to starfield-speed
    test1 ;

\ Gameplay main loop 
: scale>  +m 0e 0e 2p>f 0e transform r> execute -m ;
: render  backdrop ( .75 .75 scale> ) starfield hud sprites laser animate ;
: think  step ;
: game  show> think render ;

\ Assign BOOT hook
: boot-darkblue  init-supershow eval" title" ;
' boot-darkblue is boot

\ Init
init-supershow