\ =============================================================================
\ Allegro bindings and utilities
\ =============================================================================

Target_386_Windows [if]
    \ debug @ [if]
    \ For now, we always load the debug version because 
    \ I forgot that we have to rebuild engineer.exe in order 
    \ to generate a turnkey without all the debugging-only stuff
    \ and I don't have the time to rework the turnkey system.
        LIBRARY: allegro_monolith-debug-5.2.dll
        allegro_monolith-debug-5.2.dll 0= 
            s" Allegro failed to load" .abort
    \ [else]
    \     LIBRARY: allegro_monolith-5.2.dll
    \     allegro_monolith-5.2.dll 0= 
    \         s" Allegro failed to load" .abort
    \ [then]
    -1 constant allegro?
[else]
    ." ALERT: Allegro 5 and dependents not available; Non-Windows bindings not yet implemented!" cr
[then]

[defined] allegro? [if]
    require %idir%/allegro-5.2.10.vfx \ Allegro 5 library bindings
    require %idir%/al-utils.vfx       \ Display, window, and input state management
    require %idir%/keys.vfx           \ Keyboard key constants
    require %idir%/each-file.vfx      \ Directory iteration utilities
[then]
