\ Standalone test for Nib 2.0 Phase 1
\ This tests the core infrastructure without full engineer dependencies

\ Minimal magic-id implementation for testing
: magic-id ( - <name> <id> ) create , does> @ ;

\ Include the Phase 1 implementation  
include engineer/nib2.vfx

\ Simple standalone test
: test-standalone ( - )
    cr ." === NIB 2.0 PHASE 1 STANDALONE TEST ==="
    
    \ Reset system
    init-classifiers
    
    \ Test basic allocation
    cr ." Testing classifier allocation..."
    /classifier constant test-c1
    /classifier constant test-c2
    /classifier constant test-c3
    
    \ Test values
    test-c1 . ." (should be 0)"
    test-c2 . ." (should be 1)" 
    test-c3 . ." (should be 2)"
    
    \ Test validation
    cr ." Testing validation..."
    test-c1 valid-classifier? . ." (should be -1/true)"
    test-c2 valid-classifier? . ." (should be -1/true)"
    test-c3 valid-classifier? . ." (should be -1/true)"
    999 valid-classifier? . ." (should be 0/false)"
    
    \ Test bit tracking
    cr ." Testing bit tracking..."
    0 classifier-bit-allocated? . ." (should be -1/true)"
    1 classifier-bit-allocated? . ." (should be -1/true)"
    2 classifier-bit-allocated? . ." (should be -1/true)"
    100 classifier-bit-allocated? . ." (should be 0/false)"
    
    \ Test counter
    cr ." Testing counter..."
    #classifiers-allocated @ . ." allocated (should be 3)"
    classifier-bits-remaining . ." remaining (should be 1021)"
    
    cr ." Phase 1 standalone test completed successfully!"
    cr ;

test-standalone
bye